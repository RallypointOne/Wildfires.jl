using Pkg
Pkg.activate(@__DIR__)
Pkg.add(["JSON3", "HTTP", "Dates"])
Pkg.instantiate()

using JSON3, HTTP, Dates


header = "# This file was generated by `deps/generate.jl` at $(now()). Do not edit manually."

#-----------------------------------------------------------------------------# natural earth datasets
let
    # https://github.com/nvkelso/natural-earth-vector/tree/master/geojson
    url = "https://api.github.com/repos/nvkelso/natural-earth-vector/contents/geojson"
    res = HTTP.get(url)
    arr = JSON3.read(res.body)
    x = [':' * replace(x.name, ".geojson" => "") for x in arr]

    write(joinpath(@__DIR__, "..", "src", "gen", "natural_earth_datasets.jl"), """
    $header

    const natural_earth_datasets = [
        $(join(x, ",\n    "))
    ]

    """)
end
